import{r as o,j as e}from"./index-DX89Wz3U.js";const F={anpr:"üì∑",cctv:"üìπ",disabled:"‚ôø",parent:"üë∂",ev:"‚ö°",surface:"üÖøÔ∏è",multi:"üè¢",barrier:"üöß",pay:"üí≥",app:"üì±"};function E(t){const d=t.toLowerCase();for(const[h,s]of Object.entries(F))if(d.includes(h))return s;return"‚úì"}function T({data:t}){const[d,h]=o.useState(new Date),[s,I]=o.useState(null),[f,k]=o.useState(null),r=t.brandColor||"#F97316",y=(t.refreshInterval||60)*1e3;o.useEffect(()=>{const l=setInterval(()=>h(new Date),1e3);return()=>clearInterval(l)},[]),o.useEffect(()=>{if(!t.locationId)return;const l=async()=>{var x;try{const m=await(await fetch(`/api/locations/${t.locationId}/display-config`)).json();m.success&&I(((x=m.data)==null?void 0:x.config)||{})}catch{}};l();const n=setInterval(l,y);return()=>clearInterval(n)},[t.locationId,y]),o.useEffect(()=>{const l=(s==null?void 0:s.posApiUrl)||t.posApiUrl||"http://localhost:3000",n=(s==null?void 0:s.posSiteId)||t.posSiteId;if(!n||t.showOccupancy===!1)return;const x=async()=>{try{const O=await(await fetch(`${l}/api/payment/statistics/${n}`)).json();k({active:O.activePayments||0})}catch{}};x();const u=setInterval(x,3e4);return()=>clearInterval(u)},[s==null?void 0:s.posApiUrl,s==null?void 0:s.posSiteId,t.posApiUrl,t.posSiteId,t.showOccupancy]);const A=t.siteName,N=t.subtitle,i=t.capacity||(s==null?void 0:s.capacity),S=t.features||(s==null?void 0:s.features)||[],v=t.rules||(s==null?void 0:s.rules)||[],a=t.contact||(s==null?void 0:s.contact)||{},c=t.operatingHours||(s==null?void 0:s.operatingHours),p=(f==null?void 0:f.active)||0,g=i?Math.max(0,i-p):null,j=i?Math.round(p/i*100):0,b=d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}),w=c?b>=c.open&&b<=c.close:!0;return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",style:{background:"#0a0a0f"},children:[e.jsx("div",{className:"flex-shrink-0 px-8 py-6 border-b border-gray-800",style:{background:`linear-gradient(135deg, ${r}20 0%, transparent 100%)`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center text-2xl",style:{background:`${r}20`,border:`2px solid ${r}50`},children:"üÖøÔ∏è"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-white tracking-wider",style:{fontFamily:"Antonio, sans-serif"},children:A}),N&&e.jsx("p",{className:"text-gray-400 mt-0.5 tracking-wide",children:N})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`px-4 py-2 rounded-full text-sm font-bold tracking-wider ${w?"bg-green-500/20 text-green-400 border border-green-500/40":"bg-red-500/20 text-red-400 border border-red-500/40"}`,children:w?"OPEN":"CLOSED"}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:d.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-xs text-gray-500",children:d.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})})]})]})]})}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-0 overflow-hidden",children:[e.jsx("div",{className:"flex flex-col items-center justify-center p-8 border-r border-gray-800",children:g!==null?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("svg",{width:"200",height:"200",className:"transform -rotate-90",children:[e.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"none",stroke:"#1f2937",strokeWidth:"14"}),e.jsx("circle",{cx:"100",cy:"100",r:"85",fill:"none",stroke:j>90?"#ef4444":j>70?"#f59e0b":"#10b981",strokeWidth:"14",strokeLinecap:"round",strokeDasharray:2*Math.PI*85,strokeDashoffset:2*Math.PI*85*(1-j/100),className:"transition-all duration-1000"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("div",{className:"text-5xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:g}),e.jsx("div",{className:"text-sm text-gray-400 tracking-wider",children:"AVAILABLE"})]})]}),e.jsxs("div",{className:"flex gap-6 text-center text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:p}),e.jsx("div",{className:"text-gray-500",children:"Occupied"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:i}),e.jsx("div",{className:"text-gray-500",children:"Capacity"})]})]})]}):e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üÖøÔ∏è"}),e.jsx("div",{className:"text-lg font-medium text-white",style:{fontFamily:"Antonio, sans-serif"},children:"CAR PARK"}),i&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[i," spaces"]})]})}),e.jsxs("div",{className:"flex flex-col p-8 border-r border-gray-800 overflow-y-auto",children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-4",style:{color:r},children:"FACILITIES"}),e.jsx("div",{className:"space-y-3 mb-8",children:S.map((l,n)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-700/50 rounded-lg",children:[e.jsx("span",{className:"text-lg",children:E(l)}),e.jsx("span",{className:"text-sm text-white font-medium",children:l})]},n))}),c&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-3",style:{color:r},children:"OPERATING HOURS"}),e.jsxs("div",{className:"p-4 bg-dark-700/50 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:[c.open," ‚Äî ",c.close]}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 tracking-wider",children:"MONDAY TO SUNDAY"})]})]})]}),e.jsxs("div",{className:"flex flex-col p-8 overflow-y-auto",children:[v.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-4",style:{color:r},children:"CONDITIONS OF USE"}),e.jsx("div",{className:"space-y-2 mb-8",children:v.map((l,n)=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"w-5 h-5 rounded-full flex items-center justify-center flex-shrink-0 mt-0.5 text-xs font-bold",style:{background:`${r}20`,color:r},children:n+1}),e.jsx("span",{className:"text-gray-300",children:l})]},n))})]}),(a.phone||a.email||a.website)&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-4",style:{color:r},children:"CONTACT"}),e.jsxs("div",{className:"space-y-3",children:[a.phone&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"text-lg",children:"üìû"}),e.jsx("span",{className:"text-gray-300",children:a.phone})]}),a.email&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"text-lg",children:"üìß"}),e.jsx("span",{className:"text-gray-300",children:a.email})]}),a.website&&e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("span",{className:"text-lg",children:"üåê"}),e.jsx("span",{className:"text-gray-300",children:a.website})]})]})]}),e.jsxs("div",{className:"mt-auto pt-6 flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-1.5 rounded-full",style:{background:r}}),e.jsx("span",{className:"text-xs text-gray-600 tracking-widest",style:{fontFamily:"Antonio, sans-serif"},children:"PARKWISE"})]})]})]})]})}export{T as SiteInfoTemplate};
