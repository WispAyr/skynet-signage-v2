import{r as l,u as D,j as t}from"./index-BOV6wkQA.js";function I(){const e=new Date().getHours();return e<12?"Good Morning":e<17?"Good Afternoon":"Good Evening"}function L(e){const o=e.toLowerCase();return o.includes("sun")||o.includes("clear")?"â˜€ï¸":o.includes("cloud")?"â˜ï¸":o.includes("rain")||o.includes("drizzle")?"ðŸŒ§ï¸":o.includes("snow")?"â„ï¸":o.includes("thunder")?"â›ˆï¸":o.includes("fog")||o.includes("mist")?"ðŸŒ«ï¸":"ðŸŒ¤ï¸"}function W({data:e}){const[o,N]=l.useState(new Date),[f,k]=l.useState(null),[$,A]=l.useState(e.greeting||I()),[p,S]=l.useState(0),[b,z]=l.useState(null),[w,C]=l.useState(null),a=D(e.locationId),c=l.useMemo(()=>{const i=210+a.warmth*-180,n=.1+a.energy*.2,d=300+a.energy*200,u=4+(1-a.tempo)*8,m=a.brightness>.5?20:60;return{hue:i,glowIntensity:n,glowSize:d,animSpeed:u,textGlow:m}},[a]),r=e.brandColor||"#F97316",E=e.showClock!==!1,y=e.showWeather!==!1,g=e.slides||[],j=(e.slideInterval||10)*1e3;l.useEffect(()=>{const i=setInterval(()=>{N(new Date),e.greeting||A(I())},1e3);return()=>clearInterval(i)},[e.greeting]),l.useEffect(()=>{if(!y)return;const i=e.weatherLocation||"Ayr",n=async()=>{var u,m,x;try{const v=(u=(await(await fetch(`https://wttr.in/${encodeURIComponent(i)}?format=j1`)).json()).current_condition)==null?void 0:u[0];v&&k({temp:parseInt(v.temp_C),description:((x=(m=v.weatherDesc)==null?void 0:m[0])==null?void 0:x.value)||""})}catch{}};n();const d=setInterval(n,6e5);return()=>clearInterval(d)},[e.weatherLocation,y]),l.useEffect(()=>{if(g.length<=1)return;const i=setInterval(()=>S(n=>(n+1)%g.length),j);return()=>clearInterval(i)},[g.length,j]),l.useEffect(()=>{if(!e.locationId)return;const i=async()=>{var d,u;try{const x=await(await fetch(`/api/locations/${e.locationId}/display-config`)).json();x.success&&((u=(d=x.data)==null?void 0:d.config)!=null&&u.capacity)&&z(x.data.config.capacity)}catch{}};i();const n=setInterval(i,6e4);return()=>clearInterval(n)},[e.locationId]),l.useEffect(()=>{if(!e.showOccupancy)return;const i=e.posApiUrl||"http://localhost:3000",n=e.posSiteId;if(!n)return;const d=async()=>{try{const x=await(await fetch(`${i}/api/payment/statistics/${n}`)).json();C(x.activePayments||0)}catch{}};d();const u=setInterval(d,3e4);return()=>clearInterval(u)},[e.showOccupancy,e.posApiUrl,e.posSiteId]);const h=b&&w!==null?Math.max(0,b-w):null,s=g.length>0?g[p]:null,G=o.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return t.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",style:{background:s!=null&&s.image?`url(${s.image}) center/cover`:e.backgroundImage?`url(${e.backgroundImage}) center/cover`:`linear-gradient(135deg, hsl(${c.hue}, 15%, ${5+a.brightness*8}%) 0%, #111827 40%, ${r}15 100%)`,transition:"background 5s ease"},children:[((s==null?void 0:s.image)||e.backgroundImage)&&t.jsx("div",{className:"absolute inset-0 bg-black/60"}),t.jsx("div",{className:"absolute top-0 right-0 rounded-full blur-3xl transition-all duration-[5000ms]",style:{background:`hsl(${c.hue}, 60%, 30%)`,opacity:c.glowIntensity,width:`${c.glowSize}px`,height:`${c.glowSize}px`}}),t.jsx("div",{className:"absolute bottom-0 left-0 rounded-full blur-3xl transition-all duration-[5000ms]",style:{background:r,opacity:c.glowIntensity*.6,width:`${c.glowSize*.8}px`,height:`${c.glowSize*.8}px`,animation:`pulse ${c.animSpeed}s ease-in-out infinite`}}),a.urgency>.3&&t.jsx("div",{className:"absolute inset-0 z-5 pointer-events-none transition-opacity duration-1000",style:{background:`radial-gradient(ellipse at center, transparent 40%, rgba(220, 38, 38, ${a.urgency*.3}) 100%)`,animation:a.urgency>.6?"pulse 2s ease-in-out infinite":"none"}}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 z-20",style:{background:`linear-gradient(90deg, ${r}, ${r}80, transparent)`}}),t.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center px-8",children:[(s==null?void 0:s.icon)&&t.jsx("div",{className:"text-5xl mb-4 animate-fadeIn",children:s.icon}),t.jsx("div",{className:"mb-4 text-2xl tracking-widest uppercase",style:{color:`${r}cc`,fontFamily:"Antonio, sans-serif"},children:(s==null?void 0:s.title)||$}),t.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-white mb-6 leading-tight text-center transition-all duration-500",style:{fontFamily:"Antonio, sans-serif",textShadow:`0 0 60px ${r}30`},children:(s==null?void 0:s.message)||e.siteName}),!(s!=null&&s.message)&&e.subtitle&&t.jsx("p",{className:"text-xl md:text-2xl text-gray-400 mb-8 tracking-wide",children:e.subtitle}),t.jsxs("div",{className:"flex items-center justify-center gap-8 mb-10 flex-wrap",children:[E&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-5xl md:text-6xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:o.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider",children:G})]}),y&&f&&t.jsxs("div",{className:"text-center border-l border-gray-700 pl-8",children:[t.jsxs("div",{className:"text-4xl md:text-5xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:[L(f.description)," ",f.temp,"Â°C"]}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider capitalize",children:f.description})]}),h!==null&&t.jsxs("div",{className:"text-center border-l border-gray-700 pl-8",children:[t.jsx("div",{className:"text-4xl md:text-5xl font-bold tabular-nums",style:{fontFamily:"Antonio, sans-serif",color:h<10?"#ef4444":h<30?"#f59e0b":"#10b981"},children:h}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider",children:"SPACES"})]})]}),e.notices&&e.notices.length>0&&t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:e.notices.map((i,n)=>t.jsx("div",{className:"px-5 py-2.5 rounded-full text-sm font-medium border",style:{background:`${r}15`,borderColor:`${r}40`,color:`${r}dd`},children:i},n))}),g.length>1&&t.jsx("div",{className:"flex gap-2 mt-8",children:g.map((i,n)=>t.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${n===p?"w-8":"w-1.5 opacity-30"}`,style:{background:n===p?r:"#6b7280"}},n))})]}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between px-8 py-4 bg-black/30 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-2 rounded-full",style:{background:r}}),t.jsx("span",{className:"text-sm text-gray-500 tracking-widest",style:{fontFamily:"Antonio, sans-serif"},children:"PARKWISE"})]}),t.jsx("div",{className:"text-xs text-gray-600",children:o.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})}export{W as WelcomeDisplayTemplate};
