import{r as i,j as e}from"./index-B8c4pnN0.js";const x={normal:{bg:"rgba(255,255,255,0.03)",border:"#1f2937",badge:""},high:{bg:"rgba(251,191,36,0.05)",border:"#92400e",badge:"bg-amber-500/20 text-amber-400"},urgent:{bg:"rgba(239,68,68,0.05)",border:"#991b1b",badge:"bg-red-500/20 text-red-400"}};function T({data:t}){const[o,c]=i.useState([]),[r,j]=i.useState(0),[v,N]=i.useState(new Date),[f,w]=i.useState(null),l=t.brandColor||"#F97316",m=t.maxItems||6,g=(t.rotateInterval||12)*1e3,u=(t.refreshInterval||30)*1e3,h=t.showClock!==!1,k=t.layout||"list";i.useEffect(()=>{if(!h)return;const s=setInterval(()=>N(new Date),1e3);return()=>clearInterval(s)},[h]),i.useEffect(()=>{const s=async()=>{try{let d="/api/announcements?active_only=true";t.locationId&&(d+=`&location_id=${t.locationId}`);const y=await(await fetch(d)).json();y.success&&(c(y.data||[]),w(new Date))}catch(d){console.error("Failed to fetch announcements:",d)}};s();const n=setInterval(s,u);return()=>clearInterval(n)},[t.locationId,u]);const a=Math.ceil(o.length/m);i.useEffect(()=>{if(!t.rotatePages||a<=1)return;const s=setInterval(()=>{j(n=>(n+1)%a)},g);return()=>clearInterval(s)},[t.rotatePages,a,g]);const p=r*m,b=o.slice(p,p+m);return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",style:{background:"#0a0a0f"},children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between px-8 py-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-2 h-8 rounded-full",style:{background:l}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-widest",style:{fontFamily:"Antonio, sans-serif",color:l},children:t.title||"SITE NOTICES"}),f&&e.jsxs("p",{className:"text-[10px] text-gray-600 tracking-wider mt-0.5",children:["Updated ",f.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[a>1&&e.jsxs("div",{className:"text-xs text-gray-500",children:[r+1," / ",a]}),h&&e.jsx("div",{className:"text-2xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:v.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"flex-1 p-6 overflow-hidden",children:o.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“‹"}),e.jsx("div",{className:"text-xl",style:{fontFamily:"Antonio, sans-serif"},children:"No Current Notices"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Check back later for updates"})]})}):k==="cards"?e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 h-full content-start",children:b.map(s=>e.jsx(C,{ann:s,brandColor:l,showTimestamps:t.showTimestamps},s.id))}):e.jsx("div",{className:"space-y-3 h-full",children:b.map(s=>e.jsx(I,{ann:s,brandColor:l,showTimestamps:t.showTimestamps},s.id))})}),a>1&&e.jsx("div",{className:"flex-shrink-0 flex justify-center gap-2 pb-4",children:Array.from({length:a},(s,n)=>e.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${n===r?"w-8":"w-1.5 opacity-30"}`,style:{background:n===r?l:"#6b7280"}},n))}),e.jsx("div",{className:"flex-shrink-0 h-1",style:{background:`linear-gradient(90deg, ${l}, ${l}80, transparent)`}})]})}function I({ann:t,brandColor:o,showTimestamps:c}){const r=x[t.priority]||x.normal;return e.jsxs("div",{className:"flex items-start gap-4 p-5 rounded-xl border transition-all",style:{background:r.bg,borderColor:r.border},children:[t.icon&&e.jsx("span",{className:"text-2xl flex-shrink-0 mt-0.5",children:t.icon}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h3",{className:"text-lg font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:t.title}),t.priority!=="normal"&&e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold tracking-wider ${r.badge}`,children:t.priority.toUpperCase()})]}),e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:t.message}),c&&t.created_at&&e.jsxs("div",{className:"text-[10px] text-gray-600 mt-2 tracking-wider",children:["Posted ",new Date(t.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"})]})]})]})}function C({ann:t,brandColor:o,showTimestamps:c}){const r=x[t.priority]||x.normal;return e.jsxs("div",{className:"flex flex-col p-5 rounded-xl border h-full",style:{background:r.bg,borderColor:r.border},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[t.icon&&e.jsx("span",{className:"text-xl",children:t.icon}),t.priority!=="normal"&&e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-bold tracking-wider ${r.badge}`,children:t.priority.toUpperCase()})]}),e.jsx("h3",{className:"text-base font-bold text-white mb-2",style:{fontFamily:"Antonio, sans-serif"},children:t.title}),e.jsx("p",{className:"text-sm text-gray-400 leading-relaxed flex-1",children:t.message}),c&&t.created_at&&e.jsx("div",{className:"text-[10px] text-gray-600 mt-3 tracking-wider",children:new Date(t.created_at).toLocaleDateString("en-GB",{day:"numeric",month:"short"})})]})}export{T as AnnouncementBoardTemplate};
