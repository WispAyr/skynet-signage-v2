import{u as A,r as l,j as e}from"./index-B8c4pnN0.js";function C({data:t}){A(t.locationId);const[m,v]=l.useState(new Date),[h,j]=l.useState(t.rates||[]),[b,w]=l.useState(t.notices||[]),[f,N]=l.useState(t.paymentMethods||[]),[u,S]=l.useState(t.maxStay||""),[x,k]=l.useState(null),[y,I]=l.useState(null),a=t.brandColor||"#F97316",d=t.showClock!==!1,p=(t.refreshInterval||60)*1e3;l.useEffect(()=>{if(!d)return;const s=setInterval(()=>v(new Date),1e3);return()=>clearInterval(s)},[d]),l.useEffect(()=>{if(!t.locationId)return;const s=async()=>{var c;try{const r=await(await fetch(`/api/locations/${t.locationId}/display-config`)).json();if(r.success&&((c=r.data)!=null&&c.config)){const n=r.data.config;n.rates&&!t.rates&&j(n.rates),n.paymentMethods&&!t.paymentMethods&&N(n.paymentMethods),n.maxStay&&!t.maxStay&&S(n.maxStay),n.capacity&&I(n.capacity),n.features&&!t.notices&&w(n.features)}}catch(o){console.error("Failed to fetch location config:",o)}};s();const i=setInterval(s,p);return()=>clearInterval(i)},[t.locationId,p]),l.useEffect(()=>{if(!t.showOccupancy)return;const s=t.posApiUrl||"http://localhost:3000",i=t.posSiteId;if(!i)return;const c=async()=>{try{const n=await(await fetch(`${s}/api/payment/statistics/${i}`)).json();k({activePayments:n.activePayments||0,totalRevenue:n.totalRevenue||0,totalPayments:n.totalPayments||0})}catch{}};c();const o=setInterval(c,3e4);return()=>clearInterval(o)},[t.showOccupancy,t.posApiUrl,t.posSiteId]);const M=(x==null?void 0:x.activePayments)||0,g=y?y-M:null;return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",style:{background:"#0a0a0f"},children:[e.jsx("div",{className:"flex-shrink-0 px-8 py-6",style:{background:`linear-gradient(135deg, ${a} 0%, ${a}cc 100%)`},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white tracking-wider",style:{fontFamily:"Antonio, sans-serif"},children:t.siteName}),t.subtitle&&e.jsx("p",{className:"text-lg text-white/80 mt-1 tracking-wide",children:t.subtitle})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[g!==null&&e.jsxs("div",{className:"text-center bg-white/10 backdrop-blur-sm rounded-xl px-5 py-3",children:[e.jsx("div",{className:"text-3xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:g}),e.jsx("div",{className:"text-xs text-white/70 tracking-wider",children:"SPACES"})]}),d&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:m.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-sm text-white/60",children:m.toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short"})})]})]})]})}),e.jsxs("div",{className:"flex-1 px-8 py-6 overflow-y-auto",children:[e.jsx("div",{className:"space-y-3 max-w-2xl mx-auto",children:h.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ðŸ…¿ï¸"}),e.jsx("div",{className:"text-lg",children:"Loading tariff data..."})]}):h.map((s,i)=>e.jsxs("div",{className:`flex items-center justify-between p-5 rounded-xl transition-all ${s.highlight?"border-2":"border border-gray-800"}`,style:s.highlight?{background:`${a}10`,borderColor:`${a}60`}:{background:"rgba(255,255,255,0.03)"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-1.5 h-10 rounded-full",style:{background:s.highlight?a:"#374151"}}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xl md:text-2xl font-semibold text-white",style:{fontFamily:"Antonio, sans-serif"},children:s.label}),s.note&&e.jsx("div",{className:"text-xs mt-1 tracking-wider font-medium",style:{color:a},children:s.note})]})]}),e.jsx("div",{className:"text-3xl md:text-4xl font-bold tabular-nums",style:{fontFamily:"Antonio, sans-serif",color:s.highlight?a:"#ffffff"},children:s.price})]},i))}),u&&e.jsxs("div",{className:"text-center mt-6",children:[e.jsx("span",{className:"text-sm text-gray-500 tracking-wider",children:"MAXIMUM STAY: "}),e.jsx("span",{className:"text-sm font-bold text-white tracking-wider",children:u})]})]}),e.jsx("div",{className:"flex-shrink-0 px-8 py-4 border-t border-gray-800 bg-black/40",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsx("div",{className:"flex flex-wrap gap-3",children:b.map((s,i)=>e.jsx("span",{className:"text-sm px-4 py-1.5 rounded-full border",style:{color:`${a}dd`,borderColor:`${a}40`,background:`${a}10`},children:s},i))}),f.length>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-gray-500 tracking-wider",children:"PAYMENT:"}),f.map((s,i)=>e.jsx("span",{className:"text-xs px-3 py-1 bg-gray-800 text-gray-300 rounded-full",children:s},i))]})]})})]})}export{C as ParkingRatesTemplate};
