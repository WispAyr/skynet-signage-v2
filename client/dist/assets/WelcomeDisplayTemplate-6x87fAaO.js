import{r as c,j as t}from"./index-DX89Wz3U.js";function j(){const e=new Date().getHours();return e<12?"Good Morning":e<17?"Good Afternoon":"Good Evening"}function z(e){const i=e.toLowerCase();return i.includes("sun")||i.includes("clear")?"â˜€ï¸":i.includes("cloud")?"â˜ï¸":i.includes("rain")||i.includes("drizzle")?"ðŸŒ§ï¸":i.includes("snow")?"â„ï¸":i.includes("thunder")?"â›ˆï¸":i.includes("fog")||i.includes("mist")?"ðŸŒ«ï¸":"ðŸŒ¤ï¸"}function S({data:e}){const[i,w]=c.useState(new Date),[x,N]=c.useState(null),[I,k]=c.useState(e.greeting||j()),[g,$]=c.useState(0),[y,A]=c.useState(null),[v,C]=c.useState(null),r=e.brandColor||"#F97316",E=e.showClock!==!1,h=e.showWeather!==!1,o=e.slides||[],b=(e.slideInterval||10)*1e3;c.useEffect(()=>{const l=setInterval(()=>{w(new Date),e.greeting||k(j())},1e3);return()=>clearInterval(l)},[e.greeting]),c.useEffect(()=>{if(!h)return;const l=e.weatherLocation||"Ayr",n=async()=>{var m,u,a;try{const p=(m=(await(await fetch(`https://wttr.in/${encodeURIComponent(l)}?format=j1`)).json()).current_condition)==null?void 0:m[0];p&&N({temp:parseInt(p.temp_C),description:((a=(u=p.weatherDesc)==null?void 0:u[0])==null?void 0:a.value)||""})}catch{}};n();const d=setInterval(n,6e5);return()=>clearInterval(d)},[e.weatherLocation,h]),c.useEffect(()=>{if(o.length<=1)return;const l=setInterval(()=>$(n=>(n+1)%o.length),b);return()=>clearInterval(l)},[o.length,b]),c.useEffect(()=>{if(!e.locationId)return;const l=async()=>{var d,m;try{const a=await(await fetch(`/api/locations/${e.locationId}/display-config`)).json();a.success&&((m=(d=a.data)==null?void 0:d.config)!=null&&m.capacity)&&A(a.data.config.capacity)}catch{}};l();const n=setInterval(l,6e4);return()=>clearInterval(n)},[e.locationId]),c.useEffect(()=>{if(!e.showOccupancy)return;const l=e.posApiUrl||"http://localhost:3000",n=e.posSiteId;if(!n)return;const d=async()=>{try{const a=await(await fetch(`${l}/api/payment/statistics/${n}`)).json();C(a.activePayments||0)}catch{}};d();const m=setInterval(d,3e4);return()=>clearInterval(m)},[e.showOccupancy,e.posApiUrl,e.posSiteId]);const f=y&&v!==null?Math.max(0,y-v):null,s=o.length>0?o[g]:null,G=i.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"});return t.jsxs("div",{className:"relative flex flex-col h-full overflow-hidden",style:{background:s!=null&&s.image?`url(${s.image}) center/cover`:e.backgroundImage?`url(${e.backgroundImage}) center/cover`:`linear-gradient(135deg, #0a0a0f 0%, #111827 40%, ${r}15 100%)`},children:[((s==null?void 0:s.image)||e.backgroundImage)&&t.jsx("div",{className:"absolute inset-0 bg-black/60"}),t.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 rounded-full opacity-20 blur-3xl",style:{background:r}}),t.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 rounded-full opacity-10 blur-3xl",style:{background:r}}),t.jsx("div",{className:"absolute top-0 left-0 right-0 h-1.5 z-20",style:{background:`linear-gradient(90deg, ${r}, ${r}80, transparent)`}}),t.jsxs("div",{className:"relative z-10 flex-1 flex flex-col items-center justify-center px-8",children:[(s==null?void 0:s.icon)&&t.jsx("div",{className:"text-5xl mb-4 animate-fadeIn",children:s.icon}),t.jsx("div",{className:"mb-4 text-2xl tracking-widest uppercase",style:{color:`${r}cc`,fontFamily:"Antonio, sans-serif"},children:(s==null?void 0:s.title)||I}),t.jsx("h1",{className:"text-6xl md:text-8xl font-bold text-white mb-6 leading-tight text-center transition-all duration-500",style:{fontFamily:"Antonio, sans-serif",textShadow:`0 0 60px ${r}30`},children:(s==null?void 0:s.message)||e.siteName}),!(s!=null&&s.message)&&e.subtitle&&t.jsx("p",{className:"text-xl md:text-2xl text-gray-400 mb-8 tracking-wide",children:e.subtitle}),t.jsxs("div",{className:"flex items-center justify-center gap-8 mb-10 flex-wrap",children:[E&&t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-5xl md:text-6xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:i.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider",children:G})]}),h&&x&&t.jsxs("div",{className:"text-center border-l border-gray-700 pl-8",children:[t.jsxs("div",{className:"text-4xl md:text-5xl font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:[z(x.description)," ",x.temp,"Â°C"]}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider capitalize",children:x.description})]}),f!==null&&t.jsxs("div",{className:"text-center border-l border-gray-700 pl-8",children:[t.jsx("div",{className:"text-4xl md:text-5xl font-bold tabular-nums",style:{fontFamily:"Antonio, sans-serif",color:f<10?"#ef4444":f<30?"#f59e0b":"#10b981"},children:f}),t.jsx("div",{className:"text-sm text-gray-500 mt-2 tracking-wider",children:"SPACES"})]})]}),e.notices&&e.notices.length>0&&t.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:e.notices.map((l,n)=>t.jsx("div",{className:"px-5 py-2.5 rounded-full text-sm font-medium border",style:{background:`${r}15`,borderColor:`${r}40`,color:`${r}dd`},children:l},n))}),o.length>1&&t.jsx("div",{className:"flex gap-2 mt-8",children:o.map((l,n)=>t.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${n===g?"w-8":"w-1.5 opacity-30"}`,style:{background:n===g?r:"#6b7280"}},n))})]}),t.jsxs("div",{className:"relative z-10 flex items-center justify-between px-8 py-4 bg-black/30 backdrop-blur-sm",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-8 h-2 rounded-full",style:{background:r}}),t.jsx("span",{className:"text-sm text-gray-500 tracking-widest",style:{fontFamily:"Antonio, sans-serif"},children:"PARKWISE"})]}),t.jsx("div",{className:"text-xs text-gray-600",children:i.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]})}export{S as WelcomeDisplayTemplate};
