import{r as d,j as e}from"./index-Ci2F6IU0.js";const N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function F({data:a}){var p,v;const[o,w]=d.useState(new Date),[g,k]=d.useState(null),l=a.brandColor||"#F97316",A=a.showClock!==!1,i=a.periods||[];d.useEffect(()=>{const s=setInterval(()=>w(new Date),1e3);return()=>clearInterval(s)},[]),d.useEffect(()=>{if(!a.showOccupancy)return;const s=a.posApiUrl||"http://localhost:3000",t=a.posSiteId;if(!t)return;const r=async()=>{try{const E=await(await fetch(`${s}/api/payment/statistics/${t}`)).json();k(E.activePayments||0)}catch{}};r();const c=setInterval(r,3e4);return()=>clearInterval(c)},[a.showOccupancy,a.posApiUrl,a.posSiteId]);const x=o.getDay(),m=o.toTimeString().slice(0,5),h=(()=>{for(let s=0;s<i.length;s++){const t=i[s];if(t.active!==void 0){if(t.active)return s;continue}const r=!t.days||t.days.length===0||t.days.includes(x),c=m>=t.startTime&&m<=t.endTime;if(r&&c)return s}return-1})(),n=h>=0?i[h]:null,y=(()=>{if(i.length<=1)return null;for(const t of i){if(t===n)continue;if((!t.days||t.days.length===0||t.days.includes(x))&&t.startTime>m)return t}const s=(x+1)%7;for(const t of i)if(!t.days||t.days.length===0||t.days.includes(s))return t;return null})(),u=o.toISOString().slice(0,10),b=((p=a.specialEvents)==null?void 0:p.filter(s=>s.date===u))||[],j=((v=a.specialEvents)==null?void 0:v.filter(s=>s.date>u).slice(0,3))||[];return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",style:{background:"#0a0a0f"},children:[e.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between px-8 py-5 border-b border-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-2 h-8 rounded-full",style:{background:l}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-widest text-white",style:{fontFamily:"Antonio, sans-serif"},children:a.siteName}),e.jsx("p",{className:"text-xs tracking-widest mt-0.5",style:{color:`${l}cc`},children:"RATE SCHEDULE"})]})]}),e.jsxs("div",{className:"flex items-center gap-5",children:[g!==null&&e.jsxs("div",{className:"px-4 py-2 rounded-xl bg-dark-700 border border-dark-600 text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:g}),e.jsx("div",{className:"text-[10px] text-gray-500 tracking-wider",children:"IN USE"})]}),A&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-3xl font-bold text-white tabular-nums",style:{fontFamily:"Antonio, sans-serif"},children:o.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"})}),e.jsx("div",{className:"text-xs text-gray-500",children:o.toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"short"})})]})]})]}),b.length>0&&e.jsx("div",{className:"flex-shrink-0 px-8 py-3 bg-amber-500/10 border-b border-amber-500/30",children:b.map((s,t)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-lg",children:"ðŸŽ‰"}),e.jsxs("span",{className:"text-sm font-bold text-amber-400 tracking-wider",style:{fontFamily:"Antonio, sans-serif"},children:[s.name,":"]}),e.jsx("span",{className:"text-sm text-amber-300",children:s.note})]},t))}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("div",{className:"flex-1 flex flex-col items-center justify-center p-8",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"px-4 py-1.5 rounded-full text-xs font-bold tracking-widest mb-4 border",style:{color:n.color||l,borderColor:`${n.color||l}60`,background:`${n.color||l}15`},children:"NOW ACTIVE"}),e.jsx("h2",{className:"text-4xl font-bold text-white mb-6",style:{fontFamily:"Antonio, sans-serif"},children:n.name}),e.jsxs("div",{className:"text-sm text-gray-500 mb-6 tracking-wider",children:[n.startTime," â€” ",n.endTime,n.days&&n.days.length>0&&n.days.length<7&&e.jsxs("span",{className:"ml-2",children:["(",n.days.map(s=>N[s]).join(", "),")"]})]}),e.jsx("div",{className:"space-y-3 w-full max-w-md",children:n.rates.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl border border-gray-800 bg-dark-700/30",children:[e.jsx("span",{className:"text-lg text-gray-300",style:{fontFamily:"Antonio, sans-serif"},children:s.label}),e.jsx("span",{className:"text-2xl font-bold",style:{fontFamily:"Antonio, sans-serif",color:n.color||l},children:s.price})]},t))})]}):e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-4",children:"â°"}),e.jsx("div",{className:"text-xl",style:{fontFamily:"Antonio, sans-serif"},children:"NO ACTIVE PERIOD"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Outside operating hours"})]})}),e.jsxs("div",{className:"w-80 border-l border-gray-800 flex flex-col overflow-y-auto",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-4",style:{color:l},children:"ALL PERIODS"}),e.jsx("div",{className:"space-y-2",children:i.map((s,t)=>{const r=t===h,c=s.color||l;return e.jsxs("div",{className:`p-3 rounded-lg border transition-all ${r?"border-2":"border border-gray-800"}`,style:r?{borderColor:`${c}80`,background:`${c}10`}:{},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:s.name}),r&&e.jsx("span",{className:"w-2 h-2 rounded-full animate-pulse",style:{background:c}})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.startTime," â€” ",s.endTime]}),s.days&&s.days.length>0&&s.days.length<7&&e.jsx("div",{className:"text-[10px] text-gray-600 mt-0.5",children:s.days.map(f=>N[f]).join(", ")})]},t)})})]}),y&&e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-3",style:{color:l},children:"NEXT UP"}),e.jsxs("div",{className:"p-3 rounded-lg bg-dark-700/50 border border-dark-600",children:[e.jsx("div",{className:"text-sm font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:y.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Starting at ",y.startTime]})]})]}),j.length>0&&e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("h3",{className:"text-xs font-bold tracking-widest mb-3",style:{color:l},children:"UPCOMING EVENTS"}),e.jsx("div",{className:"space-y-2",children:j.map((s,t)=>e.jsxs("div",{className:"p-3 rounded-lg bg-dark-700/50 border border-dark-600",children:[e.jsx("div",{className:"text-sm font-bold text-white",style:{fontFamily:"Antonio, sans-serif"},children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[s.date," â€” ",s.note]})]},t))})]})]})]}),e.jsx("div",{className:"flex-shrink-0 h-1",style:{background:`linear-gradient(90deg, ${l}, ${l}80, transparent)`}})]})}export{F as ScheduleDisplayTemplate};
